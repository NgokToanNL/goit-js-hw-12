{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '52952317-f5e88216fd9e8d5aa3001977e';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport async function getImagesByQuery(query, page) {\n    const params = {\n        key: API_KEY,\n        q: query,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        page: page,\n        per_page: 15,\n    }\n\n    try {\n        const response = await axios.get(BASE_URL, { params });\n        return response.data;\n    } catch (error) {\n        console.error('Error fetching images: ', error); \n        throw new Error('Failed to fetch images from Pixabay.');\n    }\n\n    // const response = await axios.get(BASE_URL, { params });\n\n    // return response.data;\n\n}","import SimpleLightbox from 'simplelightbox';\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst galleryContainer = document.querySelector('.gallery');\nconst loadMoreBtn = document.querySelector('.load-more');\nconst loader = document.querySelector('#loader');\n\nexport const lightbox = new SimpleLightbox('.gallery a', {\n    captionsData: 'alt',\n    captionDelay: 250,\n});\n\nfunction createImageCard({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) {\n    return `\n    <li class= \"gallery-item\">\n        <a class= \"gallery-link\" href= \"${largeImageURL}\">\n            <img class= \"gallery-image\"\n                src= \"${webformatURL}\"\n                alt= \"${tags}\"\n                title= \"${tags}\"\n            />\n        </a>\n        <div class= \"image-details\">\n            <div class= \"details-item\">\n                <span class= \"detail-label\">Likes</span>\n                <span class= \"detail-value\">${likes}</span>\n            </div>\n            <div class= \"details-item\">\n                <span class= \"detail-label\">Views</span>\n                <span class= \"detail-value\">${views}</span>\n            </div>\n            <div class= \"details-item\">\n                <span class= \"detail-label\">Comments</span>\n                <span class= \"detail-value\">${comments}</span>\n            </div>\n            <div class= \"details-item\">\n                <span class= \"detail-label\">Downloads</span>\n                <span class= \"detail-value\">${downloads}</span>\n            </div>\n        </div>\n    </li> `;\n}\n\nexport function createGallery(images) {\n    if (!images || images.length === 0) {\n        return;\n    }\n\n    const markup = images.map(createImageCard).join('');\n    galleryContainer.insertAdjacentHTML('beforeend', markup);\n\n    lightbox.refresh();\n}\n\nexport function clearGallery() {\n    galleryContainer.innerHTML = '';\n}\n\nexport function showLoader() {\n    loader.classList.remove('is-hidden');\n}\n\nexport function hideLoader() {\n    loader.classList.add('is-hidden');\n}\n\nexport function showLoadMoreButton() {\n    loadMoreBtn.classList.remove('is-hidden');\n}\n\nexport function hideLoadMoreButton() {\n    loadMoreBtn.classList.add('is-hidden');\n}","import { getImagesByQuery } from './js/pixabay-api';\nimport {\n    createGallery,\n    clearGallery,\n    showLoader,\n    hideLoader,\n    showLoadMoreButton,\n    hideLoadMoreButton\n} from './js/render-functions';\nimport iziToast from 'izitoast';\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nconst form = document.querySelector('.form');\nconst searchInput = form.querySelector('input[name=\"searchQuery\"]');\nconst loadMoreBtn = document.querySelector('.load-more');\nconst galleryContainer = document.querySelector('.gallery');\n\nlet currentQuery = '';\nlet currentPage = 1;\nlet totalHits = 0;\nconst perPage = 15;\n\niziToast.settings({\n    position: 'topRight',\n    timeout: 4000,\n    progressBar: false,\n});\n\nfunction smoothScroll() {\n    const firstGalleryItem = galleryContainer.firstElementChild;\n    if (firstGalleryItem) {\n        const cardHeight = firstGalleryItem.getBoundingClientRect().height;\n        window.scrollBy({\n            top: cardHeight * 2,\n            behavior: 'smooth',\n        });\n    }\n}\n\nasync function fetchImages(isNewSearch = true) {\n    if (isNewSearch) {\n        currentPage = 1;\n        clearGallery();\n        hideLoadMoreButton();\n    }\n\n    showLoader();\n\n    try {\n        const data = await getImagesByQuery(currentQuery, currentPage);\n        const images = data.hits;\n        totalHits = data.totalHits;\n\n        if (images.length === 0 && isNewSearch) {\n            iziToast.error({\n                title: 'No result',\n                message: 'Sorry, there are no images matching your search query. Pleasy, try again!',\n            });\n            return;\n        }\n\n        if (isNewSearch) {\n            iziToast.success({\n                message: `We founf ${totalHits} images.`,\n            });\n        }\n\n        createGallery(images);\n\n        if (!isNewSearch) {\n            smoothScroll();\n        }\n\n        currentPage += 1;\n\n        const totalPages = Math.ceil(totalHits / perPage);\n        if (currentPage > totalPages) {\n            hideLoadMoreButton();\n            iziToast.info({\n                message: 'We are sorry, but you have reached the end of search results.',\n            });\n        } else {\n            showLoadMoreButton();\n        }\n    } catch (error) {\n        iziToast.error({\n            title: 'HTTP Error',\n            message: `Failed to fetch images: ${error.message}`,\n        });\n\n        hideLoadMoreButton();\n    } finally {\n        hideLoader();\n    }\n}\n\n\nform.addEventListener('submit', async event => {\n    event.preventDefault();\n\n    const newQuery = searchInput.value.trim();\n\n    if (newQuery === '') {\n        iziToast.error({\n            message: 'Please enter a search query!',\n        });\n        return;\n    }\n\n    currentQuery = newQuery;\n    await fetchImages(true);\n\n    form.reset();\n});\n\nloadMoreBtn.addEventListener('click', () => {\n    fetchImages(false);\n});\n"],"names":["API_KEY","BASE_URL","getImagesByQuery","query","page","params","axios","error","galleryContainer","loadMoreBtn","loader","lightbox","SimpleLightbox","createImageCard","webformatURL","largeImageURL","tags","likes","views","comments","downloads","createGallery","images","markup","clearGallery","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","form","searchInput","currentQuery","currentPage","totalHits","perPage","iziToast","smoothScroll","firstGalleryItem","cardHeight","fetchImages","isNewSearch","data","totalPages","event","newQuery"],"mappings":"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"}